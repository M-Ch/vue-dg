(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e(require("vue")):"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["DataGrid"]=e(require("vue")):t["DataGrid"]=e(t["Vue"])})("undefined"!==typeof self?self:this,function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="fb15")}({1247:function(t,e,r){},"284c":function(t,e,r){},4911:function(t,e,r){},"7ddf":function(t,e,r){},"8bbf":function(e,r){e.exports=t},fb15:function(t,e,r){"use strict";var n;(r.r(e),"undefined"!==typeof window)&&((n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(r.p=n[1]));var o=r("8bbf"),u=r.n(o);function i(t){return t}var l,a="DataColumn",f=u.a.extend({name:a,props:{title:{type:String},template:{},headTemplate:{type:String},sortOrder:{type:Number},sortDir:{type:String,default:"asc"},field:{type:String},sortable:{type:Boolean,default:!0},render:{},filter:{default:!0},width:{type:String},type:{type:String},values:{type:Array},icon:{type:String},formatOptions:{}},render:function(t){return t("div")}}),s=function(){function t(t){this.items=t}return t.prototype.toList=function(){return this.items()},t.prototype.select=function(e){var r=this;return new t(function(){return r.items().map(e)})},t.prototype.take=function(e){var r=this;return new t(function(){for(var t=[],n=r.items(),o=0;o<e&&n.length;o++)t.push(n[o]);return t})},t.prototype.where=function(e){var r=this;return new t(function(){var t=[];return r.items().forEach(function(r){e(r)&&t.push(r)}),t})},t.prototype.orderBy=function(e){var r=this;return new t(function(){var t=r.items();return t.sort(function(t,r){var n=e(t),o=e(r);return n<o?-1:n>o?1:0}),t})},t.prototype.selectMany=function(e){var r=this;return new t(function(){var t=[];return r.items().forEach(function(r){e(r).forEach(function(e){return t.push(e)})}),t})},t.prototype.concat=function(e){var r=this;return new t(function(){var t=r.items();return t.push.apply(t,e),t})},t.prototype.groupSorted=function(e){var r=this,n=function(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0};return new t(function(){for(var t=r.items(),o=[],u=[],i=0;i<t.length;i++){var l=t[i],a=e(l);0!==i&&n(o,a)||(o=a,u.push({key:o,values:[]})),u[u.length-1].values.push(l)}return u})},t.prototype.groupBy=function(e){var r=this;return new t(function(){var t=[],n={};r.items().forEach(function(t){var r=e(t);n[r]?n[r].push(t):n[r]=[t]});for(var o=0,u=Object.keys(n);o<u.length;o++){var i=u[o];t.push({key:i,values:n[i]})}return t})},t.prototype.all=function(t){for(var e=0,r=this.items();e<r.length;e++){var n=r[e];if(!t(n))return!1}return!0},t.prototype.zip=function(e,r){var n=this;return new t(function(){for(var t=[],o=n.items(),u=0;u<o.length;u++)t.push(r(o[u],e[u]));return t})},t.prototype.sum=function(t){for(var e=0,r=0,n=this.items();r<n.length;r++){var o=n[r];e+=t(o)}return e},t.prototype.any=function(t){for(var e=0,r=this.items();e<r.length;e++){var n=r[e];if(t(n))return!0}return!1},t.prototype.firstOrDefault=function(t){var e=this.toList();if(0!==e.length)return t?e.find(t):e[0]},t.prototype.cast=function(){return this},t}();function c(t){return new s(function(){return t})}function p(t,e){for(var r=[],n=0;n<e;n++)r.push(t+n);return c(r)}function v(t,e,r){var n=t||"";while(n.length<e)n=r+n;return n.length>e?n.substr(0,e):n}(function(t){t[t["Year"]=0]="Year",t[t["Month"]=1]="Month",t[t["Day"]=2]="Day",t[t["Hour"]=3]="Hour",t[t["Minute"]=4]="Minute",t[t["Second"]=5]="Second"})(l||(l={}));var d,g=[{token:"YYYY",formatter:function(t){return""+t.getFullYear()},setter:function(t,e){return t.year=e},kind:l.Year},{token:"YY",formatter:function(t){return(""+t.getFullYear()).substr(2)},setter:function(t,e){return t.year=e},kind:l.Year},{token:"MM",formatter:function(t){return v(""+(t.getMonth()+1),2,"0")},setter:function(t,e){return t.month=e-1},kind:l.Month},{token:"DD",formatter:function(t){return v(""+t.getDate(),2,"0")},setter:function(t,e){return t.day=e},kind:l.Day},{token:"HH",formatter:function(t){return v(""+t.getHours(),2,"0")},setter:function(t,e){return t.hour=e},kind:l.Hour},{token:"mm",formatter:function(t){return v(""+t.getMinutes(),2,"0")},setter:function(t,e){return t.minute=e},kind:l.Minute},{token:"ss",formatter:function(t){return v(""+t.getSeconds(),2,"0")},setter:function(t,e){return t.second=e},kind:l.Second}];function m(t){var e=[];while(t){var r=S[t[0]],n=r?r.find(function(e){return t.startsWith(e.token)}):void 0;if(n)e.push({type:d.DatePart,part:n}),t=t.substr(n.token.length);else{var o=e.length>0?e[e.length-1]:null;null!=o&&o.type===d.Const?o.value+=t[0]:e.push({type:d.Const,value:t[0]}),t=t.substr(1)}}return e}function h(){var t=new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())}function y(t){return m(t).map(function(t){return t.type===d.DatePart?t.part.kind:void 0}).filter(function(t){return void 0!==t})}(function(t){t[t["Const"]=0]="Const",t[t["DatePart"]=1]="DatePart"})(d||(d={}));var S={};function k(t,e){return m(e).map(function(e){return e.type===d.DatePart?e.part.formatter(t):e.value}).join("")}function D(t,e){for(var r=0,n=null,o=0,u=m(e);o<u.length;o++){var i=u[o],l=i.type===d.Const?i.value:i.part.token;if(i.type===d.DatePart&&(n=i.part.kind),!(t>=r+l.length))return n;r+=l.length}return n}function b(t,e,r){for(var n=0,o=0,u=m(r);o<u.length;o++){var i=u[o],l=i.type===d.Const?i.value:i.part.token;if(!(e>=n+l.length))return i.type===d.Const?i.value[e-n]===t:/^\d+$/gm.test(t);n+=l.length}return!1}function L(t,e){for(var r=0,n=0,o=m(e);n<o.length;n++){var u=o[n],i=u.type===d.Const?u.value:u.part.token;if(!(u.type===d.Const||t>=r+i.length))return Math.max(r,t);r+=i.length}return e.length}function E(t,e){var r=0;if(t>=e.length-1)return e.length;for(var n=0,o=m(e);n<o.length;n++){var u=o[n];if(u.type!==d.Const){var i=u.part.token.length;if(!(t>=r+i))return t<r?r:r+i;r+=i}else r+=u.value.length}return e.length-1}function T(t,e){for(var r=e.length-1,n=m(e),o=n.length-1;o>=0;o--){var u=n[o];if(u.type!==d.Const){var i=u.part.token.length;if(!(t<=r-i+1))return t>r+1?r+1:r-i+1;r-=i}else r-=u.value.length}return 0}function $(t,e){if(!t)return null;for(var r={day:0,hour:0,minute:0,month:0,second:0,year:0},n=m(e),o=0,u=n;o<u.length;o++){var i=u[o];if(!t)return null;if(i.type!==d.Const){var l=i.part,a=t.substr(0,l.token.length);if(!/^\d+$/gm.test(a))return null;t=t.substr(l.token.length),l.setter(r,parseInt(a,10))}else{if(!t.startsWith(i.value))return null;t=t.substr(i.value.length)}}return 0===t.length?new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,0):null}
/*!
 * accounting.js v0.4.2
 * Copyright 2014 Open Exchange Rates
 *
 * Freely distributable under the MIT license.
 * Portions of accounting.js are inspired or borrowed from underscore.js
 *
 * Full details and documentation:
 * http://openexchangerates.github.io/accounting.js/
 */function F(t,e){if(!t)return 0;if("number"===typeof t)return t;var r=new RegExp("[^0-9-.]","g"),n=parseFloat((""+t).replace(/\((?=\d+)(.*)\)/,"-$1").replace(e,".").replace(r,""));return isNaN(n)?0:n}function V(t,e){return t=Math.round(Math.abs(t)),isNaN(t)?e:t}function w(t,e){e=V(e,2);var r=Number(t+"e"+e),n=Math.round(r);return Number(n+"e-"+e).toFixed(e)}function C(t,e,r,n){var o=F(t,n),u=V(e,2),i=o<0?"-":"",l=parseInt(w(Math.abs(o||0),u),10)+"",a=l.length>3?l.length%3:0;return i+(a?l.substr(0,a)+r:"")+l.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+r)+(u?n+w(Math.abs(o),u).split(".")[1]:"")}c(g).groupBy(function(t){return t.token[0]}).toList().forEach(function(t){return S[t.key]=t.values.sort(function(t,e){return t.token.length<e.token.length?1:-1})});var M={},O={yes:"Yes",no:"No",pagerPage:"Page",pagerOfPages:"of",firstPage:"First page",previousPage:"Previous page",nextPage:"Next page",lastPage:"Last page",pageListItemTitle:"Page %page%",filterAccept:"Accept",filterReset:"Reset",dropdownLabel:"Select...",rangeFrom:"From:",rangeTo:"To:",containsValue:"Contains:",valueEquals:"Equals:"},A={dateFormat:"YYYY-MM-DD",datePlaceholder:"yyyy-mm-dd",timeFormat:"HH:mm",timePlaceholder:"hh:mm",dateTimeFormat:"YYYY-MM-DD HH:mm",dateTimePlaceholder:"yyyy-mm-dd hh:mm",dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNamesFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekStart:1,yearFormat:"{year}",yearRangeFormat:"{from} - {to}",monthFormat:"{month}",monthFirst:!0};function q(t){N(t.settings),H(t.calendar),G(t.text)}function Y(){return A}function H(t){for(var e=A,r=0,n=Object.getOwnPropertyNames(t);r<n.length;r++){var o=n[r];void 0!==e[o]&&(e[o]=t[o])}}var z,j,R={idField:"id",thousandSeparator:" ",decimalPrecision:2,decimalSeparator:".",ignoreDateOffset:!1,defaultRemoteSource:null};function N(t){for(var e=R,r=0,n=Object.getOwnPropertyNames(t);r<n.length;r++){var o=n[r];void 0!==e[o]&&(e[o]=t[o])}}function U(){return R}function G(t){O=t}function W(t,e){M[t]={name:t,formatter:e.formatter,filterComponent:e.filterComponent,filterParams:e.filterParams}}function K(t){function e(t){return void 0!==t&&null!==t?""+t:""}if(!t||!M[t])return e;var r=M[t].formatter;return r||e}function J(t){if(!t||!M[t])return null;var e=M[t];return e&&e.filterComponent?{component:e.filterComponent,params:e.filterParams}:null}function X(t){return O[t]}function Z(t,e){var r=M[t];r&&(r.filterComponent=e)}function Q(t){if(t instanceof Date)return t;if("string"!==typeof t)return new Date(t);var e=t.charAt(t.length-1);if("z"===e||"Z"===e)return new Date(t.substr(0,t.length-1));if(t.length<6)return new Date(t);var r=t.charAt(t.length-6),n="+"===r||"-"===r?t.substr(0,t.length-6):t;return new Date(n)}function P(t,e){return 0===t?"0":t?e?C(t,void 0!==e.precision?e.precision:R.decimalPrecision,void 0!==e.thousand?e.thousand:R.thousandSeparator,void 0!==e.separator?e.separator:R.decimalSeparator):C(t,R.decimalPrecision,R.thousandSeparator,R.decimalSeparator):""}W("bool",{formatter:function(t){return void 0===t||null===t?"":t?O.yes:O.no},filterComponent:"BoolFilter"}),W("date",{formatter:function(t,e){if(!t)return"";var r=Q(t);return k(r,"string"===typeof e?e:A.dateFormat)},filterComponent:"DateFilter"}),W("decimal",{formatter:P,filterComponent:"NumericFilter",filterParams:{decimal:!0}}),W("double",{formatter:P,filterComponent:"NumericFilter",filterParams:{decimal:!0}}),W("text",{filterComponent:"TextFilter"}),W("int",{formatter:function(t,e){return 0===t?"0":t?e?C(t,0,void 0!==e.thousand?e.thousand:R.thousandSeparator,void 0!==e.separator?e.separator:R.decimalSeparator):C(t,0,R.thousandSeparator,R.decimalSeparator):""},filterComponent:"NumericFilter",filterParams:{decimal:!1}}),W("dateTime",{formatter:function(t,e){if(!t)return"";var r=Q(t);return k(r,"string"===typeof e?e:A.dateTimeFormat)},filterComponent:"DateTimeFilter"}),function(t){t["Equals"]="eq",t["GreaterThan"]="gt",t["GraterThanOrEqual"]="gte",t["LowerThan"]="lt",t["LowerThanOrEqual"]="lte",t["NotEqals"]="neq",t["In"]="in",t["Contains"]="substr"}(z||(z={})),function(t){t["Asc"]="asc",t["Desc"]="desc"}(j||(j={}));var B=function(){function t(t){this.onSuccess=function(){},this.onError=function(){},this.onAlways=function(){},this.resolver=t}return t.prototype.success=function(t){return this.onSuccess=t,this},t.prototype.error=function(t){return this.onError=t,this},t.prototype.always=function(t){return this.onAlways=t,this},t.prototype.fetch=function(){this.resolver(this.onSuccess,this.onError,this.onAlways)},t}(),I={};function x(t,e){I[t]=e}var _=[];function tt(t){t&&_.push(t)}function et(t){if(!t)return t;if(Array.isArray(t)){for(var e=0,r=t;e<r.length;e++){var n=r[e];et(n)}return t}if("object"===typeof t){for(var o=0,u=Object.keys(t);o<u.length;o++){var i=u[o];t[i]=et(t[i])}return t}if("string"===typeof t){var l=/^\/Date\(([0-9]+)\)\/$/.exec(t);return l?new Date(parseInt(l[1],10)):t}return t}function rt(t,e,r){I[t]=function(n){return{name:t,load:function(t){return{resolver:function(o,u,i){var l=e(n,t),a=new XMLHttpRequest;a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE)if(i(),a.status<200||a.status>=300)u(a.status);else{var t=JSON.parse(a.responseText),e=r?r(t):t;o(et(e.items),e.total,l.dataUrl,l.pageUrl)}},a.open("GET",l.pageUrl),_.forEach(function(t){return t(a)}),a.send()}}}}}}var nt=function(t,e){if(!t)return ot();if("string"===typeof t){if(!e)throw{error:"DataGrid source type is not defined. Use 'type' property or set defaultRemoteSource through configuration."};var r=I[e];if(r)return r(t);throw{error:"Not supported data source type: "+e+"."}}if(Array.isArray(t))return lt(t);throw{error:"Not supported data type passed as source for grid. Expected string url or array of objects."}};function ot(){return{name:"empty",load:function(){return{resolver:function(t,e,r){t([],0,"no-data","no-data"),r()}}}}}function ut(t){return void 0!==t?t:z.Equals}function it(t,e){var r=t[e.field],n=ut(e.operator);if(n===z.Equals)return r===e.value;if(n===z.NotEqals)return r!==e.value;if(n===z.GraterThanOrEqual)return r>=e.value;if(n===z.GreaterThan)return r>e.value;if(n===z.LowerThan)return r<e.value;if(n===z.LowerThanOrEqual)return r<=e.value;if(n===z.In)return e.value&&e.value.length>0&&c(e.value).any(function(t){return t===r});throw{message:"Unknown filter type: "+n}}function lt(t){return{name:"array",load:function(e){return{resolver:function(r,n,o){var u=function(t){return c(e.filters).all(function(e){return c(e.filters).any(function(e){return it(t,e)})})},i=e.filters.length>0?c(t).where(u).toList():t.slice();e.sorting.length>0&&i.sort(function(t,r){for(var n=0,o=e.sorting;n<o.length;n++){var u=o[n];if(t[u.field]!==r[u.field]){var i=t[u.field]<r[u.field];return"desc"===u.direction&&(i=!i),i?-1:1}}return 0});var l=i.slice(e.page*e.pageSize,(e.page+1)*e.pageSize);r(l,i.length,"local","local"),o()}}}}}r("284c");var at={};["Backspace","Tab","ArrowLeft","ArrowRight"].forEach(function(t){return at[t]=!0});var ft,st=u.a.extend({name:"NumericInput",props:{value:{type:Number,default:null},float:{type:Boolean,default:!1},separator:{type:String,default:"."}},data:function(){return{buffer:null!==this.value&&void 0!==this.value?""+this.value:""}},methods:{formatValue:function(t){return t?(""+t).replace(".",this.separator):""},emitValue:function(t){var e=this;t.endsWith(this.separator)&&(t+="0"),t.startsWith(this.separator)&&(t="0"+t),t=t.replace(this.separator,".");var r=function(){return"0"===t?0:t?e.float?parseFloat(t):parseInt(t,10):null}();return r!==this.value&&this.$emit("input",r),r}},render:function(t){var e=this;return t("input",{attrs:{type:"text"},domProps:{value:this.formatValue(this.value)},on:{keydown:function(t){var r=t.target;return!!t.ctrlKey||(t.key>="0"&&t.key<="9"||(!!/F[0-9]{1,2}/.test(t.key)||("-"===t.key&&!r.value||(t.key===e.separator&&e.float?-1===r.value.indexOf(e.separator):!!at[t.key]||("Enter"===t.key?(e.emitValue(r.value),!0):("Escape"===t.key&&(e.emitValue(""+e.value),r.value=""+e.value,t.target.blur()),t.stopPropagation(),t.preventDefault(),!1))))))},blur:function(t){var r=t.target,n=e.emitValue(r.value);r.value=e.formatValue(n)}}})}}),ct=u.a.extend({name:"Pager",props:{total:{type:Number,default:0},value:{type:Number,default:0},pageSize:{type:Number,default:10}},computed:{pageCount:function(){return this.total<=0?1:Math.ceil(this.total/this.workingSize)},workingSize:function(){return this.pageSize>=1?this.pageSize:1}},render:function(t){var e=this;return t("div",{class:"dg-pager"},[t("span",X("pagerPage")),t("numeric-input",{props:{value:this.value+1},style:{width:10+20*(""+this.value).length+"px"},on:{input:function(t){var r=t>=1?t-1:0;e.$emit("input",r>=e.pageCount?e.pageCount-1:r<0?0:r)}}}),t("span",X("pagerOfPages")+" "+this.pageCount)])},components:{NumericInput:st}}),pt=u.a.extend({name:"PageList",props:{total:{type:Number,default:0},value:{type:Number,default:0},pageSize:{type:Number,default:10}},computed:{pageCount:function(){return this.total<=0?1:Math.ceil(this.total/this.workingSize)},workingSize:function(){return this.pageSize>=1?this.pageSize:1}},render:function(t){var e=this,r=function(){for(var t=[],r=e.value-2;r<e.value;r++)r>=0&&t.push(r);t.push(e.value);for(r=e.value+1;t.length<5&&r<e.pageCount;r++)t.push(r);while(t.length<5&&0!==t[0])t.splice(0,0,t[0]-1);return t},n=r().map(function(r){return r===e.value?t("span",{class:"current-page"},""+(r+1)):t("a",{attrs:{href:"#",title:X("pageListItemTitle").replace("%page%",""+(r+1))},on:{click:function(t){t.preventDefault(),e.$emit("input",r)}}},""+(r+1))}),o=[{title:"firstPage",text:"≪",selector:function(){return 0}},{title:"previousPage",text:"<",selector:function(){return e.value>0?e.value-1:0}},{title:"nextPage",text:">",selector:function(){return e.value<e.pageCount-1?e.value+1:e.pageCount-1}},{title:"lastPage",text:"≫",selector:function(){return e.pageCount-1}}],u=o.map(function(r){return t("a",{attrs:{href:"#",title:X(r.title),disabled:r.selector()===e.value?"disabled":null},on:{click:function(t){t.preventDefault(),e.$emit("input",r.selector())}}},r.text)});return u.splice.apply(u,[2,0].concat(n)),t("div",{class:"dg-page-list"},u)},components:{NumericInput:st}}),vt=u.a.extend({name:"Checkbox",props:{value:{type:Boolean,default:!1},label:{type:String}},render:function(t){var e=this;return t("label",{},[t("input",{attrs:{type:"checkbox"},domProps:{checked:!!this.value},on:{input:function(t){return e.$emit("input",t.target.checked)}}}),this.label])}}),dt=u.a.extend({name:"BoolFilter",props:{value:{type:Array,default:function(){return[]}},fieldName:{type:String}},render:function(t){var e=this,r=this.value&&this.value.length?this.value[0].filters:[],n=!!r.find(function(t){return t.value}),o=!!r.find(function(t){return!t.value}),u=function(t,r){var n=c([{emit:t,value:!0},{emit:r,value:!1}]).where(function(t){return t.emit}).select(function(t){return{value:t.value,operator:z.Equals,field:e.fieldName}}).toList(),o={filters:n};e.$emit("input",[o])};return t("div",{},[t("Checkbox",{props:{label:X("yes"),value:n},on:{input:function(t){return u(t,o)}}}),t("Checkbox",{props:{label:X("no"),value:o},on:{input:function(t){return u(n,t)}}})])},components:{Checkbox:vt}});r("7ddf");(function(t){t["Year"]="year",t["Month"]="month",t["Day"]="day"})(ft||(ft={}));var gt=u.a.extend({name:"CalendarDisplay",props:{value:{type:Date,default:null}},data:function(){return{mode:ft.Day,editValue:null}},methods:{switchMode:function(t,e){this.editValue=e,this.mode=t}},render:function(t){var e=this,r=function(){return e.editValue?e.editValue:e.value?e.value:h()}(),n=Y(),o=r.getFullYear(),u=r.getMonth(),i=this.value?new Date(this.value.getFullYear(),this.value.getMonth(),this.value.getDate()).getTime():0,l=function(){var r=p(0,7).select(function(t){return(n.weekStart+t)%7}).toList(),l=new Date(o,u,1),a=new Date(o,u+1,0),f=l.getDay(),s=r.indexOf(f),c=6-r.indexOf(a.getDay()),v=a.getDate(),d=p(-s,v+s+c).select(function(r){var n=new Date(o,u,1+r),l=i===n.getTime();e.value&&(n.setHours(e.value.getHours()),n.setMinutes(e.value.getMinutes()),n.setSeconds(e.value.getSeconds()));var a=function(){return r<0?"dg-prev":r>=v?"dg-next":null}();return t("li",{class:[a,l?"dg-date-selected":null],on:{click:function(t){t.stopPropagation(),e.$emit("input",n)}}},""+n.getDate())});return t("ul",{class:["dg-days"]},d.toList())},a=function(e){var r=function(e,r,n){return null!=n?t("a",{class:r,attrs:{href:"#"},on:{click:function(t){t.preventDefault(),n()}}},e):null},n=t("div",{class:["dg-links-prev","dg-links"]},[r("《","dg-first",e.onFirst),r("〈","dg-prev",e.onPrev)]),o=t("div",{class:["dg-links-next","dg-links"]},[r("〉","dg-next",e.onNext),r("》","dg-last",e.onLast)]),u=t("div",{class:"dg-title"},e.items.map(function(t){return r(t.title,null,t.action)}));return t("div",{class:"dg-calendar-head"},[n,u,o])},f=function(){var t=[{title:n.monthFormat.replace("{month}",n.monthNamesFull[u]),action:function(){return e.mode=ft.Month}},{title:n.yearFormat.replace("{year}",""+o),action:function(){return e.mode=ft.Year}}];return n.monthFirst||t.reverse(),a({items:t,onFirst:function(){return e.editValue=new Date(o-1,u,1)},onPrev:function(){return e.editValue=new Date(o,u-1,1)},onLast:function(){return e.editValue=new Date(o+1,u,1)},onNext:function(){return e.editValue=new Date(o,u+1,1)}})},s=function(){return a({items:[{title:n.yearFormat.replace("{year}",""+o),action:function(){return e.mode=ft.Year}}],onFirst:function(){return e.editValue=new Date(o-1,u,1)},onLast:function(){return e.editValue=new Date(o+1,u,1)}})},c=function(){var t=o-o%10,r=t+9;return a({items:[{title:n.yearRangeFormat.replace("{from}",""+t).replace("{to}",""+r),action:function(){}}],onFirst:function(){return e.editValue=new Date(o-10,u,1)},onLast:function(){return e.editValue=new Date(o+10,u,1)}})},v=function(){var r=p(0,12).select(function(r){return t("li",{on:{click:function(){return e.switchMode(ft.Day,new Date(o,r,1))}}},n.monthNamesShort[r])});return t("ul",{class:["dg-months"]},r.toList())},d=function(){var r=o-o%10,n=p(r,10).select(function(r){return t("li",{on:{click:function(){return e.switchMode(ft.Month,new Date(r,u,1))}}},""+r)});return t("ul",{class:["dg-years"]},n.toList())},g=function(){var e=p(0,7).select(function(t){return(n.weekStart+t)%7}).select(function(e){return t("li",n.dayNames[e])});return t("ul",{class:"dg-sub-header"},e.toList())},m={};return m[ft.Day]={body:l,header:f,subHeader:g},m[ft.Month]={body:v,header:s,subHeader:function(){return null}},m[ft.Year]={body:d,header:c,subHeader:function(){return null}},t("div",{class:["dg-calendar","dg-type-"+this.mode],on:{click:function(t){return t.stopPropagation()}}},[m[this.mode].header(),m[this.mode].subHeader(),t("div",{class:["dg-calendar-display"]},[m[this.mode].body()])])},components:{}});r("1247");function mt(t){while(1){if(t.classList.contains("dg-scroll-panel"))return t;t=t.parentElement}}var ht=u.a.extend({name:"ScrollPanel",data:function(){return{vOffset:this.value}},props:{value:{type:Number,default:0}},mounted:function(){this.vOffset=this.value},watch:{value:function(){this.vOffset=this.value}},render:function(t){var e=this;return t("div",{class:"dg-scroll-panel",on:{wheel:function(t){t.preventDefault(),e.vOffset+=Math.round(t.deltaY>10?t.deltaY/10:t.deltaY),e.$emit("input",e.vOffset)}},directives:[{name:"ContentMargin",value:{value:this.vOffset,valueAdjust:function(t){e.vOffset=t,e.$emit("input",t)}}},{name:"BarMargin",value:this.vOffset}]},[t("div",{class:"dg-scroll-content"},this.$slots.default),t("div",{class:"dg-scroll-track"},[t("div",{on:{mousedown:function(t){if(0===t.button){t.preventDefault();var r,n=mt(t.target),o=n.querySelector(".dg-scroll-content"),u=n.querySelector(".dg-scroll-track div"),i=n.clientHeight,l=o.clientHeight-i,a=t.pageY,f=e.vOffset,s=i-u.clientHeight,c=function(r){t.stopImmediatePropagation(),t.preventDefault();var n=r.pageY-a,o=n/s;e.vOffset=f+Math.round(o*l),e.$emit("input",e.vOffset)};r=function(e){0===e.button&&(t.preventDefault(),document.body.removeEventListener("mousemove",c),document.body.removeEventListener("mouseup",r))},document.body.addEventListener("mousemove",c),document.body.addEventListener("mouseup",r)}}}})])])},directives:{BarMargin:function(t,e){var r=e.value,n=t.querySelector(".dg-scroll-content"),o=t.querySelector(".dg-scroll-track div"),u=t.clientHeight,i=n.clientHeight-u,l=r/i,a=u-o.clientHeight,f=Math.round(a*l);o.style.marginTop=f+"px"},ContentMargin:function(t,e){var r=e.value,n=t.clientHeight,o=t.querySelector(".dg-scroll-content"),u=o.clientHeight-n,i=Math.max(Math.min(u,r.value),0);i!==r.value&&r.valueAdjust(i),o.style.marginTop="-"+i+"px"}}}),yt=(r("4911"),[{kind:l.Hour,getter:function(t){return t.getHours()},count:24,setter:function(t,e){return t.setHours(e)}},{kind:l.Minute,getter:function(t){return t.getMinutes()},count:60,setter:function(t,e){return t.setMinutes(e)}},{kind:l.Second,getter:function(t){return t.getSeconds()},count:60,setter:function(t,e){return t.setSeconds(e)}}]),St=u.a.extend({name:"TimeDisplay",props:{value:{type:Date},format:{type:String,default:Y().timeFormat}},data:function(){return{offsets:[{kind:l.Hour,value:0},{kind:l.Minute,value:0},{kind:l.Second,value:0}]}},mounted:function(){this.snapItems()},watch:{value:function(){this.snapItems()}},methods:{snapItems:function(){var t=this.value?this.value:h(),e=this.$el.querySelector("li"),r=e.clientHeight;this.offsets=yt.map(function(e){return{kind:e.kind,value:r*e.getter(t)}})}},render:function(t){var e=this,r=y(this.format).map(function(t){return yt.find(function(e){return e.kind===t})}).filter(function(t){return void 0!==t}),n=function(){return e.value?e.value:h()},o=n(),u=function(r){var u=r.getter(o),i=e.offsets.find(function(t){return t.kind===r.kind});if(!i)throw{message:"No offset entry for token type: "+r.kind};return t("scroll-panel",{props:{value:i.value},on:{input:function(t){i.value=t;var o=e.$el.querySelector("li"),u=o.clientHeight,l=n(),a=r.getter(l),f=t/u,s=f>=a?Math.min(a+1,Math.ceil(f)):Math.max(a-1,Math.floor(f)),c=Math.max(0,Math.min(s,r.count-1));if(r.getter(l)!==c){var p=new Date(l);r.setter(p,c),e.$emit("input",p)}}}},[t("ul",{},p(0,r.count).select(function(o){return t("li",{class:u===o?"dg-part-selected":null,on:{click:function(){if(u!==o){var t=new Date(n());r.setter(t,o),e.$emit("input",t)}else e.$emit("accept")}}},v(""+o,2,"0"))}).toList())])};return t("div",{class:["dg-time-display","dg-time-"+r.length],on:{click:function(t){return t.stopPropagation()}}},r.map(function(t){return u(t)}).concat([t("div",{class:"dg-select-indicator"})]))},components:{ScrollPanel:ht}});function kt(t,e,r){if(e<0||e>t.length-r.length)throw{message:"Index out of range"};return 0===e?r+t.substr(r.length):e===t.length-r.length?t.substr(0,t.length-r.length)+r:t.substr(0,e)+r+t.substr(e+r.length)}var Dt=u.a.extend({name:"DatePicker",props:{value:{default:null},format:{type:String},placeholder:{type:String}},data:function(){return{editValue:"",editIndex:null,popupValue:this.value?this.value:h(),clickListener:null,popupVisible:!1}},mounted:function(){var t=this;this.editValue=this.value?k(this.value,this.format):"",this.clickListener=function(e){e instanceof CustomEvent&&e.detail&&e.detail.sender===t||(t.popupVisible=!1,e.stopPropagation())}},components:{CalendarDisplay:gt,TimeDisplay:St},watch:{popupVisible:function(){if(this.popupVisible){var t=new CustomEvent("dg-date-picker-close",{detail:{sender:this}});document.dispatchEvent(t),document.addEventListener("click",this.clickListener),document.addEventListener("dg-date-picker-close",this.clickListener)}else document.removeEventListener("click",this.clickListener),document.removeEventListener("dg-date-picker-close",this.clickListener)}},render:function(t){var e=this,r=t("input",{attrs:{type:"text",placeholder:this.placeholder},domProps:{value:this.editValue,selectionStart:this.editIndex,selectionEnd:this.editIndex},on:{dgFocus:function(t){t.preventDefault();var r=t.target;r.focus(),e.popupVisible=!1},keydown:function(t){var r=t.target;if("Tab"===t.key)return!0;if("c"===t.key&&t.ctrlKey)return!0;if("a"===t.key&&t.ctrlKey)return!0;if(("v"===t.key||"x"===t.key)&&t.ctrlKey)return e.$nextTick(function(){var t=e.editIndex;e.editValue=$(r.value,e.format)?r.value:"",e.editIndex=Math.min(t>0?t:e.editValue.length,e.editValue.length)}),!0;if(!e.popupVisible&&"Escape"===t.key)return e.editValue="",r.blur(),void t.stopPropagation();if("Enter"===t.key||"Escape"===t.key){e.popupVisible=!1;var n=$(e.editValue,e.format);return e.$emit("input",n),void t.stopPropagation()}return!!/^F\d+$/gm.test(t.key)||(function(){var r=e.editIndex?e.editIndex:0,n=e.editValue?e.editValue:e.placeholder,o=function(){return"ArrowRight"===t.key&&t.ctrlKey?E(r,e.format):"ArrowLeft"===t.key&&t.ctrlKey?T(r,e.format):"ArrowLeft"===t.key?Math.max(0,r-1):"ArrowRight"===t.key?Math.min(r+1,n.length):"Home"===t.key?0:"End"===t.key?n.length:null}();if(null===o)if("Backspace"===t.key&&t.ctrlKey){if(r>0){var u=r,i=T(u,e.format);e.editValue=kt(n,i,e.placeholder.substr(i,u-i)),e.editIndex=i}}else if("Delete"===t.key&&t.ctrlKey){if(r<n.length){i=r,u=E(i,e.format);e.editValue=kt(n,i,e.placeholder.substr(i,u-i)),e.editIndex=i}}else if("Delete"!==t.key)if("Backspace"!==t.key){if(!(t.key.length>1)){var l=b(t.key,r,e.format),a=t.key>="0"&&t.key<="9";if(l||a){var f=l?r:L(l?r:r+1,e.format),s=L(f+1,e.format);if(!(f>=n.length)){e.editValue=kt(n,f,t.key),e.editIndex=s;var c=$(e.editValue,e.format);c&&(e.popupValue=c)}}}}else r>0&&(e.editValue=kt(n,r-1,e.placeholder[r-1]),e.editIndex=r-1);else r>=0&&(e.editValue=kt(n,r,e.placeholder[r]),e.editIndex++);else e.editIndex=Math.min(o,e.editValue?e.editValue.length:0)}(),t.stopPropagation(),t.preventDefault(),!1)},focus:function(t){var r=t.target;e.$nextTick(function(){return e.editIndex=r.selectionStart?r.selectionStart:0}),e.popupVisible=!0},click:function(t){var r=t.target;e.$nextTick(function(){return e.editIndex=r.selectionStart?r.selectionStart:0}),e.popupVisible=!0,t.stopPropagation(),t.preventDefault()},blur:function(t){var r=$(e.editValue,e.format);e.$emit("input",r),e.editValue=r?k(r,e.format):""}}});return t("div",{class:"dg-date-input",on:{click:function(t){var r=t.target;e.$nextTick(function(){return e.editIndex=r.selectionStart?r.selectionStart:0}),e.popupVisible=!0,t.stopPropagation(),t.preventDefault()}}},[r,this.popupVisible?function(){var r=D(e.editIndex,e.format);if(null===r)return null;var n=r===l.Hour||r===l.Minute||r===l.Second;return n?t("TimeDisplay",{props:{value:e.popupValue,format:e.format},on:{input:function(t){e.popupValue=t,e.$emit("input",e.popupValue),e.editValue=k(e.popupValue,e.format)},accept:function(){return e.popupVisible=!1}}}):t("CalendarDisplay",{props:{value:e.popupValue},on:{input:function(t){e.popupValue=t,e.$emit("input",e.popupValue),e.editValue=k(e.popupValue,e.format);var r=e.$el.querySelector("input[type='text']");r.focus(),e.popupVisible=!1,e.editIndex=e.editValue.length}}})}():null])}}),bt=function(){return{inserted:function(t){var e="input"===t.tagName.toLowerCase()?t:t.querySelector("input");if(e){var r=new Event("dgFocus",{cancelable:!0});!1!==e.dispatchEvent(r)&&e.focus()}}}},Lt=u.a.extend({name:"DateFilter",props:{value:{type:Array,default:function(){return[]}},fieldName:{type:String}},components:{DatePicker:Dt},directives:{focus:bt()},render:function(t){var e=this,r=this.value&&this.value.length?this.value:[],n=r.find(function(t){return"date-from"===t.tag}),o=r.find(function(t){return"date-to"===t.tag}),u=function(t,r){var n=c([{emit:!!t,value:t,tag:"date-from",operator:z.GraterThanOrEqual},{emit:!!r,value:r,tag:"date-to",operator:z.LowerThanOrEqual}]).where(function(t){return t.emit}).select(function(t){return{tag:t.tag,filters:[{value:t.value,operator:t.operator,field:e.fieldName}]}}).toList();e.$emit("input",n)},i=Y();return t("div",{class:"dg-date-filter"},[t("div",[X("rangeFrom"),t("DatePicker",{props:{value:n?n.filters[0].value:null,format:i.dateFormat,placeholder:i.datePlaceholder},directives:[{name:"focus"}],on:{input:function(t){u(t,function(){var t=o?o.filters[0].value:null;if(!t)return null;var e=new Date(t);return e.setDate(t.getDate()+1),e}())}}})]),t("div",[X("rangeTo"),t("DatePicker",{props:{value:o?o.filters[0].value:null,format:i.dateFormat,placeholder:i.datePlaceholder},on:{input:function(t){u(n?n.filters[0].value:null,function(){if(!t)return null;var e=new Date(t);return e.setDate(e.getDate()+1),e.setMilliseconds(-1),e}())}}})])])}}),Et=u.a.extend({name:"DateTimeFilter",props:{value:{type:Array,default:function(){return[]}},fieldName:{type:String}},components:{DatePicker:Dt},directives:{focus:bt()},render:function(t){var e=this,r=this.value&&this.value.length?this.value:[],n=r.find(function(t){return"date-from"===t.tag}),o=r.find(function(t){return"date-to"===t.tag}),u=function(t,r){var n=c([{emit:!!t,value:t,tag:"date-from",operator:z.GraterThanOrEqual},{emit:!!r,value:r,tag:"date-to",operator:z.LowerThanOrEqual}]).where(function(t){return t.emit}).select(function(t){return{tag:t.tag,filters:[{value:t.value,operator:t.operator,field:e.fieldName}]}}).toList();e.$emit("input",n)},i=Y();return t("div",{class:"dg-date-filter"},[t("div",[X("rangeFrom"),t("DatePicker",{props:{value:n?n.filters[0].value:null,format:i.dateTimeFormat,placeholder:i.dateTimePlaceholder},directives:[{name:"focus"}],on:{input:function(t){u(t,o?o.filters[0].value:null)}}})]),t("div",[X("rangeTo"),t("DatePicker",{props:{value:o?o.filters[0].value:null,format:i.dateTimeFormat,placeholder:i.dateTimePlaceholder},on:{input:function(t){u(n?n.filters[0].value:null,t)}}})])])}});function Tt(t){return 0===t.length?[]:"string"===typeof t[0]?t.map(function(t){return{key:t,value:t}}):"number"===typeof t[0]?t.map(function(t){return{key:""+t,value:""+t}}):t}var $t=u.a.extend({name:"ValueListFilter",props:{value:{type:Array,default:function(){return[]}},fieldName:{type:String},options:{type:Array,default:function(){return[]}}},render:function(t){var e=this,r=this.value&&this.value.length?this.value[0].filters:[],n=r.length>0?r[0].value:[],o={};n.forEach(function(t){return o[t]=!0});var u={},i=Tt(this.options);i.forEach(function(t){return u[t.key]=t.value});var l=function(t){var r=t.length?[{filters:[{field:e.fieldName,operator:z.In,value:t}]}]:[];e.$emit("input",r)},a=function(e){return t("li",[u[e],t("a",{class:"dg-remove-value",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),l(c(n).where(function(t){return t!==e}).toList())}}},"x")])},f=c(i).where(function(t){return!o[t.key]}).toList();return t("div",{class:"dg-value-list"},[t("ul",n.map(a)),t("select",{on:{change:function(t){t.stopPropagation(),t.preventDefault();var e=t.target,r=n.slice(0);r.push(f[e.selectedIndex-1].key),l(r)}},domProps:{selectedIndex:0}},[t("option",{class:"dg-select-placeholder"},X("dropdownLabel"))].concat(f.map(function(e){return t("option",[e.value])})))])},components:{Checkbox:vt}}),Ft=u.a.extend({name:"NumericFilter",props:{value:{type:Array,default:function(){return[]}},fieldName:{type:String},params:{}},components:{NumericInput:st},directives:{focus:bt()},render:function(t){var e=this,r=this.value&&this.value.length?this.value:[],n=r.find(function(t){return"range-from"===t.tag}),o=r.find(function(t){return"range-to"===t.tag}),u=r.find(function(t){return"value-equals"===t.tag}),i=function(t,r,n){var o=c([{emit:null===n&&!!t,value:t,tag:"range-from",operator:z.GraterThanOrEqual},{emit:null===n&&!!r,value:r,tag:"range-to",operator:z.LowerThanOrEqual},{emit:null!==n,value:n,tag:"value-equals",operator:z.Equals}]).where(function(t){return t.emit}).select(function(t){return{tag:t.tag,filters:[{value:t.value,operator:t.operator,field:e.fieldName}]}}).toList();e.$emit("input",o)},l=U();return t("div",{class:"dg-numeric-filter"},[t("div",[X("valueEquals"),t("NumericInput",{props:{value:u?u.filters[0].value:null,float:this.params.decimal,separator:l.decimalSeparator},directives:[{name:"focus"}],on:{input:function(t){i(null,null,t)}}})]),t("div",[X("rangeFrom"),t("NumericInput",{props:{value:n?n.filters[0].value:null,float:this.params.decimal,separator:l.decimalSeparator},on:{input:function(t){i(t,o?o.filters[0].value:null,null)}}})]),t("div",[X("rangeTo"),t("NumericInput",{props:{value:o?o.filters[0].value:null,float:this.params.decimal,separator:l.decimalSeparator},on:{input:function(t){i(n?n.filters[0].value:null,t,null)}}})])])}}),Vt=u.a.extend({name:"TextFilter",props:{value:{type:Array,default:function(){return[]}},fieldName:{type:String}},directives:{focus:bt()},render:function(t){var e=this,r=this.value&&this.value.length?this.value[0].filters:null,n=r?r[0].value:null,o=function(t){var r=t?[{filters:[{field:e.fieldName,operator:z.Contains,value:t}]}]:[];e.$emit("input",r)};return t("div",{},[X("containsValue"),t("input",{domProps:{value:n},attrs:{type:"text"},directives:[{name:"focus"}],on:{input:function(t){return o(t.target.value)}}})])}}),wt=u.a.extend({name:"FilterPopup",props:{value:{type:Array,default:function(){return[]}},fieldName:{type:String},filterComponent:{type:String},filterOptions:{},filterParams:{}},mounted:function(){var t=this;this.clickListener=function(){t.opened=!1},this.closeListener=function(e){e instanceof CustomEvent&&e.detail&&e.detail.sender===t||(t.opened=!1,e.stopPropagation())},this.keyListener=function(e){"Enter"===e.key&&(t.opened=!1,t.$emit("input",t.workingValue),e.stopPropagation()),"Escape"===e.key&&(t.opened=!1,e.stopPropagation())},this.opened&&this.bindEvents()},beforeDestroy:function(){this.unbindEvents()},data:function(){return{opened:!1,workingValue:[]}},methods:{bindEvents:function(){document.addEventListener("click",this.clickListener),document.addEventListener("keydown",this.keyListener),document.addEventListener("dg-filter-popup-close",this.closeListener)},unbindEvents:function(){document.removeEventListener("click",this.clickListener),document.removeEventListener("keydown",this.keyListener),document.removeEventListener("dg-filter-popup-close",this.closeListener)}},watch:{opened:function(){if(this.opened?this.bindEvents():this.unbindEvents(),this.opened){var t=new CustomEvent("dg-filter-popup-close",{detail:{sender:this}});document.dispatchEvent(t)}}},render:function(t){var e=this;return t("div",{class:"dg-column-filter",attrs:{"data-opened":this.opened,"data-has-value":this.value&&this.value.length>0}},[t("a",{class:"dg-popup-link",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.workingValue=e.value,e.opened=!e.opened}}},"▼"),this.opened?t("div",{class:"dg-filter-popup",on:{click:function(t){t.stopPropagation(),document.dispatchEvent(new Event("dg-date-picker-close"))}},directives:[{name:"adjustSide"}]},[t("div",{attrs:{"data-component":this.filterComponent}},[t("form",{on:{submit:function(t){t.preventDefault(),e.$emit("input",e.workingValue),e.opened=!1}}},[t(this.filterComponent,{props:{value:this.workingValue,options:this.filterOptions,params:this.filterParams,fieldName:this.fieldName},on:{input:function(t){return e.workingValue=t}}}),t("input",{domProps:{type:"submit"},style:{display:"none"}})])]),t("div",{class:"dg-popup-actions"},[t("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.$emit("input",e.workingValue),e.opened=!1}}},X("filterAccept")),t("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.$emit("input",[]),e.opened=!1}}},X("filterReset"))])]):null])},directives:{adjustSide:{inserted:function(t){var e=1.25*t.clientWidth,r=t.getBoundingClientRect();t.classList.add(window.innerWidth-r.left>e?"dg-side-left":"dg-side-right")}}},components:{BoolFilter:dt,DateFilter:Lt,NumericFilter:Ft,DateTimeFilter:Et,TextFilter:Vt,ValueListFilter:$t}}),Ct=u.a.extend({name:"TriCheckbox",props:{value:{type:Boolean,default:!1}},render:function(t){var e=this;return t("input",{attrs:{type:"checkbox",checked:!!this.value},domProps:{indeterminate:null===this.value,checked:!!this.value},on:{input:function(t){return e.$emit("input",t.target.checked)},click:function(t){var r=t.target;t.preventDefault(),t.stopPropagation();var n=null!==e.value&&!e.value;return r.checked=n,e.$emit("input",n),!1}}})}});function Mt(t){function e(t){return"string"===typeof t?{field:t,direction:j.Asc}:{field:t.field,direction:t.direction?t.direction:j.Asc}}return Array.isArray(t)?t.map(e):[e(t)]}function Ot(t,e,r){return!(t?!e:e)&&(!t&&!e||t.length===e.length&&r())}function At(t,e){return Ot(t,e,function(){return p(0,t.length).all(function(r){return t[r].direction===e[r].direction&&t[r].field===e[r].field})})}function qt(t,e){return Ot(t,e,function(){return c(t).zip(e,function(t,e){return t.field===e.field&&t.operator===e.operator&&t.value===e.value}).all(function(t){return t})})}function Yt(t,e){return Ot(t,e,function(){return c(t).zip(e,function(t,e){return qt(t.filters,e.filters)}).all(function(t){return t})})}function Ht(t,e){return Ot(t,e,function(){var r={};return t.forEach(function(t){return r[t.field]=t.groups}),c(e).all(function(t){return Yt(r[t.field],t.groups)})})}var zt,jt="FilterField",Rt=u.a.extend({name:jt,props:{field:{type:String},operator:{type:String,default:z.Equals},value:{default:null}},methods:{getValue:function(){return{field:this.field,value:this.value,operator:this.operator}},notifyParent:function(){var t=this.$parent.onValueSignaled;t&&t()}},mounted:function(){this.notifyParent()},beforeDestroy:function(){this.notifyParent()},watch:{field:"notifyParent",value:"notifyParent"},render:function(t){return t("div")}}),Nt="FilterGroup",Ut=u.a.extend({name:Nt,methods:{getValue:function(){return{filters:c(this.$children).where(function(t){return t.$options.name===jt}).cast().select(function(t){return t.getValue()}).toList()}},onValueSignaled:function(){this.notifyParent()},notifyParent:function(){var t=this.$parent.onValueSignaled;t&&t()}},beforeDestroy:function(){this.notifyParent()},mounted:function(){this.notifyParent()},render:function(t){return t("div",this.$slots.default)}}),Gt="GroupField",Wt=u.a.extend({name:Gt,props:{field:{type:String},order:{type:Number},direction:{type:String,default:j.Asc}},methods:{notifyParent:function(){var t=this.$parent.onValueSignaled;t&&t()}},mounted:function(){this.notifyParent()},beforeDestroy:function(){this.notifyParent()},watch:{field:"notifyParent",order:"notifyParent",direction:"notifyParent"},render:function(t){return t("div")}});function Kt(t){u.a.config.silent||console.error(t)}function Jt(t,e){return nt(t,e||U().defaultRemoteSource)}(function(t){t["None"]="none",t["Single"]="single",t["Multi"]="multi"})(zt||(zt={}));var Xt,Zt=u.a.extend({name:"DataGrid",data:function(){var t=this;return i({vPage:0,vFetchId:0,vDataSource:Jt(t.source,t.type),vPageData:[],vSorting:t.sorting?Mt(t.sorting):[],vTotal:0,vColumnFilters:t.columnFilters?t.columnFilters:[],vSelectedIds:t.selectedIds?t.selectedIds:[],vExpanded:{},vIsLoading:!1,vReloadHandler:null,vUri:null,vPageUri:null})},mounted:function(){this.selectionMode===zt.None&&this.resetSelection(),Array.isArray(this.vSorting)&&0!==this.vSorting.length||(this.vSorting=this.findColumns().filter(function(t){return null!==t.sortOrder&&void 0!==t.sortOrder&&t.field}).sort(function(t,e){return t.sortOrder-e.sortOrder}).map(function(t){return{field:t.field,direction:"desc"===t.sortDir?j.Desc:j.Asc}}),this.$emit("update:sorting",this.vSorting)),this.switchPage(this.page,!0,!0),this.bindReload(this.reloadEvent)},beforeDestroy:function(){this.bindReload(null)},watch:{page:function(){this.switchPage(this.page)},reloadEvent:function(){this.bindReload(this.reloadEvent)},filters:function(){this.switchPage(this.page)},sourceArgs:function(){this.switchPage(0,!0)},pageSize:function(t,e){var r=e*this.vPage;this.switchPage(Math.floor(r/t),!0)},source:function(){this.vDataSource=Jt(this.source,this.type)},soureOptions:function(){this.vDataSource=Jt(this.source,this.type)},selectionMode:function(){this.selectionMode===zt.None&&this.resetSelection(),this.selectionMode===zt.Single&&this.vSelectedIds.length>1&&(this.vSelectedIds=[this.vSelectedIds[0]],this.$emit("update:selectedIds",this.vSelectedIds),this.$emit("update:selected",this.selected?[this.selected[0]]:[]))},selectedIds:function(){this.selectedIds?this.vSelectedIds.length===this.selectedIds.length&&c(this.vSelectedIds).zip(this.selectedIds,function(t,e){return t===e}).any(function(t){return!t})||(this.vSelectedIds=this.selectedIds):this.vSelectedIds=[]},vDataSource:function(){this.switchPage(0,!0)},vColumnFilters:function(t,e){Ht(t,e)||this.switchPage(0,!0)},columnFilters:function(){this.vColumnFilters=this.columnFilters},sorting:function(){var t=Mt(this.sorting);At(this.vSorting,t)||(this.vSorting=t)},vSorting:function(){this.fetchSource()}},props:{page:{type:Number,default:0},pageSize:{type:Number,default:10},reloadEvent:{type:String,default:"grid:reload"},source:{default:null},type:{default:null},sourceArgs:{default:null},isLoading:{type:Boolean,default:!1},idField:{type:String,default:function(){return U().idField}},sorting:{type:Array,default:function(){return[]}},selectedIds:{type:Array,default:function(){return[]}},selected:{type:Array,default:function(){return[]}},selectionMode:{type:String,default:zt.None},sortable:{type:Boolean,default:!0},pageable:{type:Boolean,default:!0},filterable:{type:Boolean,default:!0},keepSelection:{type:Boolean,default:!1},checkboxes:{type:Boolean,default:!0},canReload:{type:Boolean,default:!0},uri:{type:String,default:null},pageUri:{type:String,default:null},rowClass:{type:Function},filters:{},columnFilters:{},detailsTemplate:{default:null},fieldInfos:{type:Array,default:null},theme:{type:String,default:"dg-light"},groupTemplate:{default:null}},methods:i({switchPage:function(t,e,r){(this.vPage!==t||e)&&(r||this.keepSelection||this.resetSelection(),this.vPage=t,this.$emit("update:page",t),this.fetchSource())},bindReload:function(t){var e=this,r=this.$root;r&&(null!=this.vReloadHandler&&r.$off(this.vReloadHandler.name,this.vReloadHandler.handler),t&&(this.vReloadHandler={name:t,handler:function(){return e.switchPage(e.vPage,!0)}},r.$on(t,this.vReloadHandler.handler)))},onValueSignaled:function(){this.switchPage(0,!0)},selectAll:function(){var t=this;this.keepSelection||(this.vSelectedIds=this.vPageData.map(function(e){return e[t.idField]}),this.$emit("update:selectedIds",this.vSelectedIds),this.$emit("update:selected",this.vPageData));var e={};this.vSelectedIds.forEach(function(t){e[""+t]=!0});var r=this.vPageData.filter(function(r){return!e[r[t.idField]]});this.vSelectedIds=this.vSelectedIds.slice().concat(r.map(function(e){return e[t.idField]})),this.$emit("update:selectedIds",this.vSelectedIds),this.$emit("update:selected",this.selected?this.selected.slice().concat(r):r)},findColumns:function(){var t=this.$slots.default;return void 0===t?[]:c(t).where(function(t){return void 0!==t.tag&&t.tag.endsWith(a)}).select(function(t){return t.componentOptions&&t.componentOptions.propsData?t.componentOptions.propsData:null}).where(function(t){return null!==t}).cast().toList()},findGrouping:function(){var t=this.$slots.default;return void 0===t?[]:c(t).where(function(t){return void 0!==t.tag&&t.tag.endsWith(Gt)}).select(function(t){return t.componentOptions&&t.componentOptions.propsData?t.componentOptions.propsData:null}).where(function(t){return null!==t}).cast().orderBy(function(t){return t.order}).select(function(t){return{field:t.field,direction:t.direction?t.direction:j.Asc}}).toList()},updateSelection:function(t){var e=this,r=t[this.idField];if(void 0!==r)return this.vSelectedIds.findIndex(function(t){return t===r})>=0?(this.vSelectedIds=this.vSelectedIds.filter(function(t){return t!==r}),this.$emit("update:selectedIds",this.vSelectedIds),void this.$emit("update:selected",this.selected?this.selected.filter(function(t){return t[e.idField]!==r}):[])):this.selectionMode===zt.Single?(this.vSelectedIds=[r],this.$emit("update:selectedIds",this.vSelectedIds),void this.$emit("update:selected",[t])):this.selectionMode===zt.Multi?(this.vSelectedIds=this.vSelectedIds.slice().concat([r]),this.$emit("update:selectedIds",this.vSelectedIds),void this.$emit("update:selected",this.selected?this.selected.slice().concat([t]):[t])):void Kt("Unknown selection mode selected: "+this.selectionMode+".");Kt("Data item does not have "+this.idField+" property specified as id.")},resetSelection:function(){this.vSelectedIds=[],this.$emit("update:selectedIds",[]),this.$emit("update:selected",[])},fetchSource:function(){var t=this;this.vFetchId++;var e=this.vFetchId;this.$emit("update:isLoading",!0),this.vIsLoading=!0,this.$nextTick(function(){if(e===t.vFetchId){var r=function(){if(!t.filters)return[];function e(t){return"filters"in t?t:{filters:[t]}}return Array.isArray(t.filters)?t.filters.map(e):[e(t.filters)]},n=c(t.$children).where(function(t){return t.$options.name===Nt}).cast().select(function(t){return t.getValue()}).where(function(t){return t.filters.length>0}).toList(),o=c(t.$children).where(function(t){return t.$options.name===jt}).cast().select(function(t){return{filters:[t.getValue()]}}).toList(),u=c(Array.isArray(t.fieldInfos)?t.fieldInfos:[]).select(function(t){return{field:t.field,dataType:t.dataType}}).where(function(t){return!!t.field}).toList(),i={};u.forEach(function(t){return i[t.field]=!0}),t.findColumns().filter(function(t){return t.field&&!i[t.field]}).forEach(function(t){return u.push({dataType:t.type,field:t.field})});var l={sorting:function(){var e=t.findGrouping(),r={};e.forEach(function(t){return r[t.field]=!0});var n={};t.vSorting.forEach(function(t){return n[t.field]=t});var o=e.map(function(t){var e=n[t.field];return e||t}),u=t.vSorting.filter(function(t){return!r[t.field]});return o.concat(u)}(),page:t.vPage,pageSize:t.pageSize,filters:c(t.vColumnFilters).selectMany(function(t){return t.groups}).concat(n).concat(o).concat(r()).toList(),fields:u,args:t.sourceArgs},a=t.vDataSource.load(l);new B(a.resolver).always(function(){e===t.vFetchId&&(t.$emit("update:isLoading",!1),t.vExpanded={},t.vIsLoading=!1)}).error(function(e){Kt("Unable to load grid page. Data source error: "+e+"."),t.vPageData=[],t.$emit("update:uri",null),t.$emit("update:pageUri",null),t.vUri=null,t.vPageUri=null,t.vTotal=0}).success(function(r,n,o,u){e===t.vFetchId&&(t.vExpanded={},t.vPageData=r,t.vTotal=n,t.$emit("update:uri",o),t.$emit("update:pageUri",u),t.vUri=o,t.vPageUri=u)}).fetch()}})}}),render:function(t){var e=this,r=!!this.detailsTemplate,n=function(){return e.findColumns().map(function(t){function e(){if(!t.values)return null;if(!Array.isArray(t.values))return null;if(0===t.values.length)return null;if("string"===typeof t.values[0]||"number"===typeof t.values[0])return null;var e={};return t.values.forEach(function(t){return e[t.key]=t.value}),e}return{definition:t,values:e()}})},o={};this.vSorting.forEach(function(t){return o[t.field]=t.direction?t.direction:j.Asc});var u={};function i(t,e){if(!e)return null;if(!0===e){var r=J(t);return null!=r?{filter:r.component,params:r.params,options:null}:null}return{filter:e,options:null,params:null}}this.vColumnFilters.forEach(function(t){return u[t.field]=t.groups});var l=this.selectionMode===zt.Multi&&this.checkboxes,a=n(),f=a.map(function(r){var n=r.definition,l=n.headTemplate?e.$scopedSlots[n.headTemplate]:null,a=l?l(n):n.title?n.title:n.field,f=e.sortable&&(n.sortable||void 0===n.sortable)&&n.field,s=n.field?o[n.field]:null,p=void 0===n.filter||n.filter,v=e.filterable&&p?n.values?{filter:"ValueListFilter",options:n.values,params:null}:i(n.type,p):null,d=[a,t("span",{class:"sort-direction"},s?"asc"===s?"↑":"↓":""),v&&n.field?t("FilterPopup",{props:{value:u[n.field],fieldName:n.field,filterComponent:v?v.filter:null,filterParams:v?v.params:null,filterOptions:v?v.options:null},on:{input:function(t){var r=c(e.vColumnFilters).where(function(t){return t.field!==n.field}).toList();r.push({field:n.field,groups:t}),e.$emit("update:columnFilters",r),e.vColumnFilters=r}}}):null];return n.icon&&d.splice(0,0,t("i",{class:n.icon,attrs:{"aria-hidden":!0}})),t("th",{class:f?"can-sort":null,on:{click:function(t){if(f&&n.field){t.preventDefault();var r=e.vSorting.find(function(t){return t.field===n.field}),o=u(r?r.direction:void 0);e.vSorting=o?[{field:n.field,direction:o}]:[],e.$emit("update:sorting",e.vSorting)}function u(t){return t===j.Asc?j.Desc:t===j.Desc?null:j.Asc}}}},d)}),s={};this.vSelectedIds.forEach(function(t){s[""+t]=!0}),r&&f.splice(0,0,t("th",{class:"dg-details"})),l&&f.splice(0,0,t("th",{class:"dg-selector"},[t("TriCheckbox",{props:{value:0!==this.vSelectedIds.length&&(!((this.keepSelection?this.vTotal:this.vPageData.length)!==this.vSelectedIds.length||!c(this.vPageData).all(function(t){return s[t[e.idField]]}))||null)},on:{input:function(t){t?e.selectAll():e.resetSelection()}}})]));var p=function(r,n){var o=n.definition,u=function(){if(o.render)return o.render(o.field?r[o.field]:null,r,t);if(!o.template){if(!o.field)return Kt("Data column has no field and no template defined. It will be always empty."),"";var u=r[o.field];if(n.values){var i=n.values[""+u];return void 0!==i?i:""+u}return K(o.type)(u,void 0!==o.formatOptions?o.formatOptions:null,t)}var l=function(t){var n=e.$scopedSlots[t];return n?n({row:r,value:o.field?r[o.field]:null}):(Kt("Unable to find scoped slot named '"+t+"' defined as template for grid data column."),"")};if("string"===typeof o.template)return l(o.template);var a=o.template(o.field?r[o.field]:null,r,t);return"string"===typeof a?l(a):a};return t("td",[u()])},v=function(n){var o=a.map(function(t){return p(n,t)});r&&o.splice(0,0,t("td",{class:"dg-details"},[t("a",{attrs:{href:"#",class:e.vExpanded[n[e.idField]]?"dg-expanded":null},on:{click:function(t){t.preventDefault(),e.vExpanded[n[e.idField]]=!e.vExpanded[n[e.idField]],e.$forceUpdate()}}},"▲")])),l&&o.splice(0,0,t("td",{class:"dg-selector"},[t("TriCheckbox",{props:{value:!!s[n[e.idField]]},on:{input:function(){return e.updateSelection(n)}}})]));var u=["dg-data-row",s[n[e.idField]]?"dg-selected":null];if(e.rowClass){var i=e.rowClass(n);Array.isArray(i)&&u.push.apply(u,i),"string"===typeof i&&u.push(i)}var f=[t("tr",{class:u.length>0?u:void 0,on:{click:function(t){e.selectionMode!==zt.None&&(t.preventDefault(),t.stopPropagation(),e.updateSelection(n))}}},o)];if(e.vExpanded[n[e.idField]]){var c=function(t){var r=e.$scopedSlots[t];return r?r({item:n}):(Kt("Unable to find scoped slot named '"+e.detailsTemplate+"' for details row."),null)},v=function(){if("string"!==typeof e.detailsTemplate){var r=e.detailsTemplate(n,t);return"string"===typeof r?c(r):r}return c(e.detailsTemplate)};f.push(t("tr",{class:"dg-details-row"},[t("td",{attrs:{colspan:o.length}},[v()])]))}return f},d=function(r,n){for(var o={},u=0;u<n.length;u++)o[n[u]]=r[u];var i=function(){if(!e.groupTemplate)return r.join(", ");if("string"===typeof e.groupTemplate){var n=e.$scopedSlots[e.groupTemplate];return n?n({group:o}):(Kt("Unable to find scoped slot named '"+e.groupTemplate+"' defined as template for grid data group."),r.join(", "))}return e.groupTemplate(o,t)};return t("tr",{class:"dg-grouping-row"},[t("td",{attrs:{colspan:a.length}},[i()])])},g=a.map(function(e){return t("col",{style:{width:e.definition.width?e.definition.width:void 0}})});r&&g.unshift(t("col",{style:{width:"5px"}}));var m=t("thead",{class:"dg-head"},[t("tr",{},f)]),h=function(){var t=e.findGrouping(),r=c(e.vPageData);return 0===t.length?r.selectMany(v).toList():r.groupSorted(function(e){return t.map(function(t){return e[t.field]})}).selectMany(function(e){return[d(e.key,t.map(function(t){return t.field}))].concat(e.values.map(v).flat())}).toList()}(),y=t("tbody",{class:"dg-body"},h),S=t("table",{class:"dg-table"},[t("colgroup",{},g),m,y]),k=t("div",{class:"dg-hidden"},this.$slots.default?this.$slots.default:[]),D=t("pager",{props:{value:this.vPage,pageSize:this.pageSize,total:this.vTotal},on:{input:function(t){e.switchPage(t),e.$emit("update:page",t)}}}),b=t("page-list",{props:{value:this.vPage,pageSize:this.pageSize,total:this.vTotal},on:{input:function(t){e.switchPage(t),e.$emit("update:page",t)}}}),L=t("a",{class:"dg-reload",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.switchPage(e.vPage,!0)}}},[t("i",{class:"icon-arrows-cw"})]);return t("div",{class:["dg-grid",this.theme,this.vIsLoading?"dg-loading":null]},[k,S,this.pageable?t("div",{class:"dg-footer"},[this.canReload?L:null,b,D]):null,this.vIsLoading?t("div",{class:"dg-loader"}):null])},components:{Pager:ct,PageList:pt,FilterPopup:wt,TriCheckbox:Ct}});function Qt(t){if(t===z.Equals)return"eq";if(t===z.GraterThanOrEqual)return"ge";if(t===z.GreaterThan)return"gt";if(t===z.LowerThan)return"lt";if(t===z.LowerThanOrEqual)return"le";throw{message:"Unknown odata filter type: "+t}}function Pt(t){if(t===j.Asc)return"asc";if(t===j.Desc)return"desc";throw{message:"Unknown odata sort direction: "+t}}function Bt(t,e){var r=t===Xt.Version3?"odata.count":"@odata.count";return{items:e.value,total:parseInt(e[r],10)}}function It(t,e){return e instanceof Date?"DateTime'"+k(e,"YYYY-MM-DDTHH:mm:ss")+"'":"boolean"===typeof e?e?"true":"false":"number"!==typeof e?"'"+e+"'":t&&"decimal"===t.dataType?e+"m":e}function xt(t,e){return e instanceof Date?""+k(e,"YYYY-MM-DDTHH:mm:ssz"):"boolean"===typeof e?e?"true":"false":"number"!==typeof e?"'"+e+"'":t&&"decimal"===t.dataType?e+"m":e}function _t(t,e,r){var n=r.filters.map(function(e){return e.filters.map(function(e){var n=ut(e.operator),o=r.fields.find(function(t){return t.field===e.field}),u=t===Xt.Version3?It:xt;if(n===z.NotEqals)return"not("+e.field+" eq "+u(o,e.value)+")";if(n===z.Contains)return t===Xt.Version3?"substringof("+u(o,e.value)+", "+e.field+")":"contains("+e.field+", "+u(o,e.value)+")";if(n===z.In){if(!e.value||0===e.value.length)return null;var i=e.value.map(function(t){return"("+e.field+" eq "+u(o,t)+")"}).join(" or ");return e.value.length>1?"("+i+")":i}return e.field+" "+Qt(n)+" "+u(o,e.value)}).filter(function(t){return!!t}).join(" and ")}),o=n.length>1?n.map(function(t){return"("+t+")"}).join(" and "):n.length>0?n[0]:null,u=r.sorting.map(function(t){return t.field+" "+Pt(t.direction)}).join(", "),i=function(){if(!r.args)return[];var t=r.args;return Array.isArray(t.vars)?t.vars:[]}(),l=[{name:"$filter",value:o},{name:"$orderby",value:u}].concat(i).filter(function(t){return t.value}).map(function(t){return t.name+"="+t.value}).join("&"),a=e+"?"+l,f=l?"&":"",s=t===Xt.Version3?"$inlinecount=allpages":"$count=true";return{dataUrl:a,pageUrl:""+a+f+"$top="+r.pageSize+"&$skip="+r.page*r.pageSize+"&"+s}}function te(t){if(t===z.Equals)return"eq";if(t===z.GraterThanOrEqual)return"gte";if(t===z.GreaterThan)return"gt";if(t===z.LowerThan)return"lt";if(t===z.LowerThanOrEqual)return"lte";if(t===z.Contains)return"contains";if(t===z.NotEqals)return"neq";throw{message:"Unknown odata filter type: "+t}}function ee(t){if(t===j.Asc)return"asc";if(t===j.Desc)return"desc";throw{message:"Unknown odata sort direction: "+t}}function re(t){return{items:t.Data,total:t.Total}}function ne(t,e){var r=e.filters.map(function(t){return t.filters.map(function(t){var e=ut(t.operator);function r(t){return t instanceof Date?"datetime'"+k(t,"YYYY-MM-DDTHH-mm-ss")+"'":"number"!==typeof t?"'"+t+"'":t}if(e===z.In){if(!t.value||0===t.value.length)return null;var n=t.value.map(function(e){return"("+t.field+"~eq~"+r(e)+")"}).join("~or~");return t.value.length>1?"("+n+")":n}return t.field+"~"+te(e)+"~"+r(t.value)}).filter(function(t){return null!==t}).join("~and~")}),n=r.length>1?r.map(function(t){return"("+t+")"}).join("~and~"):r.length>0?r[0]:null,o=e.sorting.map(function(t){return t.field+"-"+ee(t.direction)}).join("~"),u=[{name:"filter",value:n},{name:"sort",value:o}].filter(function(t){return t.value}).map(function(t){return t.name+"="+t.value}).join("&"),i=t+"?"+u,l=u?"&":"",a=e.page+1;return{dataUrl:i,pageUrl:""+i+l+"pageSize="+e.pageSize+"&page="+a}}(function(t){t[t["Version3"]=3]="Version3",t[t["Version4"]=4]="Version4"})(Xt||(Xt={}));var oe={dateFormat:"YYYY-MM-DD",datePlaceholder:"yyyy-mm-dd",timeFormat:"HH:mm",timePlaceholder:"hh:mm",dateTimeFormat:"YYYY-MM-DD HH:mm",dateTimePlaceholder:"yyyy-mm-dd hh:mm",dayNames:["N","Pn","Wt","Śr","Czw","Pt","So"],monthNamesFull:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],monthNamesShort:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Paź","Lis","Gru"],weekStart:1,yearFormat:"{year}",yearRangeFormat:"{from} - {to}",monthFormat:"{month}",monthFirst:!0},ue={thousandSeparator:" ",decimalPrecision:2,decimalSeparator:","},ie={yes:"Tak",no:"Nie",pagerPage:"Strona",pagerOfPages:"z",firstPage:"Pierwsza strona",previousPage:"Poprzednia strona",nextPage:"Następna strona",lastPage:"Ostatnia strona",pageListItemTitle:"Strona %page%",filterAccept:"OK",filterReset:"Usuń",dropdownLabel:"Wybierz...",rangeFrom:"Od:",rangeTo:"Do:",containsValue:"Zawiera:",valueEquals:"Równa się:"},le={settings:ue,text:ie,calendar:oe},ae=le,fe={plPL:ae},se={DataGrid:Zt,DataColumn:f,FilterGroup:Ut,FilterField:Rt,GroupField:Wt},ce={install:function(t){Object.keys(se).forEach(function(e){return t.component(e,se[e])})},addType:W,addSource:x,addRemoteSource:rt,addXhrHook:tt,setCalendar:H,setSettings:N,setFilterComponent:Z,setLanguage:G,setLocale:q,locales:fe};rt("odata3",function(t,e){return _t(3,t,e)},function(t){return Bt(3,t)}),rt("odata4",function(t,e){return _t(4,t,e)},function(t){return Bt(4,t)}),rt("odata",function(t,e){return _t(4,t,e)},function(t){return Bt(4,t)}),rt("kendo-mvc",ne,re);var pe=ce;e["default"]=pe}})["default"]});
//# sourceMappingURL=DataGrid.umd.min.js.map